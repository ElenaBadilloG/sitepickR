[{"path":"/articles/sitepickR-demo.html","id":"getting-started-sampling-ay-2017-18-california-schools-and-districts","dir":"Articles","previous_headings":"","what":"Getting Started: Sampling AY 2017-18 California schools and districts","title":"sitePickR: Getting Started","text":"Elena Badillo-Goicoechea, Robert Olsen, Elizabeth . Stuart 2022-09-16","code":""},{"path":"/articles/sitepickR-demo.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"sitePickR: Getting Started","text":"sitepickR designed select representative sample sites prospective impact evaluation, randomized controlled trial (RCT). Like generalizeR, package designed selecting schools can used select type site defined geography administrative responsibility (e.g., county, job training center, health clinic). Unlike generalizeR, sitepicker designed select sites two stages —first “units” contain multiple sites located nearby /administration “subunits” containing individual sites. Two-stage sampling may necessary cost study depend number units (e.g., school districts), one-stage sample subunits (e.g., schools) likely contain units study can afford. main function package, selectMatch() lets user carry two-level sample selection possibility initially selected participant wanting participate anticipated. procedure aims reduce bias (/loss generalizability population) introduce. selecting units subunits, sitepickR uses cube method (e.g., Deville & Tillé, 2004; Tillé 2011). cube method probability sampling method designed satisfy criteria balance sample population. Recent research shown method performs well simulations studies educational programs (Fay & Olsen, review). implement cube method, sitepickerR uses sampling R package. Users option select units equal probabilities probabilities proportional “size” measured terms number subunits nested within units. addition, sitepickR uses statistical matching select possible replacement units. education RCTs, share selected districts agrees participate tends low. address challenge, sitepickR selects ranks 10 replacement districts districts selected using cube method. Replacement districts selected using statistical matching based propensity score methods. implement statistical matching, sitepickR uses MatchIt R package. sitepickR’s core sampling + matching procedure, implemented selectMatch() function, consists four main steps: Study sample design: identify: 1) target population nested structure (e.g. [school district:school]); 2) observable covariates interest unit level; 3) observable covariates interest sub-unit level. Randomly select initial sample units target population. Obtain list ‘best’ matches (e.g. replacement candidates) initially selected unit, terms covariates interest. Balance initially selected (‘original’) units target population. Balance original units group matches (1 K, closest ). Balance sub-units associated unit replacement group original sub-units population, terms available covariates interest, unit sub-unit level. vignette guide reader, step--step, sitepickR’s basic functionalities, data Common Core Data (CCD) California schools (2017-18), using pre-processed dataset comes package installation. technical details package’s main functions sample dataset included documentation.","code":""},{"path":"/articles/sitepickR-demo.html","id":"package-and-data-set-up","dir":"Articles","previous_headings":"","what":"Package and data set up","title":"sitePickR: Getting Started","text":"First, needed, install sitepickR package help devtools: Now load package calling library: Now let’s load sample CCD-California 2017-18 dataset comes installed package: Process raw aggregate dataset order format expected selectMatch using sitepckr makeDF() function. re-define key variables create new variable, ‘unitSize’, used step selectMatch procedure units initially sampled. Specifically, cube sampling allows us (optionally) select units way biased number sub-units:","code":"if(!require(devtools)){     install.packages(\"devtools\") }  if(!require(sitepickR)){     devtools::install_github(\"ElenaBadilloG/sitepickR\")     } library(sitepickR) rawCCD <- sitepickR::rawCCD  head(rawCCD) #>    LEAID     NCESSCH w.pct.frlunch w.pct.black w.pct.hisp w.pct.female #> 1 600001 60000109444      54.67626   0.7194245  43.165468     48.92086 #> 2 600006 60000608774      11.13861   0.8663366   9.282178     48.39109 #> 3 600009 60000908780      78.28947   0.0000000  78.289474     46.71053 #> 4 600013 60001308257      18.13563   1.7587074  13.126080     46.91478 #> 5 600013 60001308553      18.13563   1.7587074  13.126080     46.91478 #> 6 600014 60001409077      81.88847   5.5068437  67.853079     47.56987 #>   sch.pct.frlunch sch.pct.black sch.pct.hisp sch.pct.female dtrct_size unitSize #> 1        54.67626     0.7194245    43.165468       48.92086        278        1 #> 2        11.13861     0.8663366     9.282178       48.39109        808        1 #> 3        78.28947     0.0000000    78.289474       46.71053        152        1 #> 4        11.32597     1.6574586    10.497238       45.58011       1086        2 #> 5        24.94530     1.8599562    15.754923       48.24945        914        2 #> 6        90.60465     7.0697674    76.837209       47.62791       1075        3 #>   distr.type #> 1          C #> 2          D #> 3          A #> 4          B #> 5          B #> 6          B dfCCD <- makeDF(rawCCD,                  unitID=\"LEAID\", subunitID=\"NCESSCH\") head(dfCCD) #>    LEAID     NCESSCH w.pct.frlunch w.pct.black w.pct.hisp w.pct.female #> 1 600001 60000109444      54.67626   0.7194245  43.165468     48.92086 #> 2 600006 60000608774      11.13861   0.8663366   9.282178     48.39109 #> 3 600009 60000908780      78.28947   0.0000000  78.289474     46.71053 #> 4 600013 60001308257      18.13563   1.7587074  13.126080     46.91478 #> 5 600013 60001308553      18.13563   1.7587074  13.126080     46.91478 #> 6 600014 60001409077      81.88847   5.5068437  67.853079     47.56987 #>   sch.pct.frlunch sch.pct.black sch.pct.hisp sch.pct.female dtrct_size unitSize #> 1        54.67626     0.7194245    43.165468       48.92086        278        1 #> 2        11.13861     0.8663366     9.282178       48.39109        808        1 #> 3        78.28947     0.0000000    78.289474       46.71053        152        1 #> 4        11.32597     1.6574586    10.497238       45.58011       1086        2 #> 5        24.94530     1.8599562    15.754923       48.24945        914        2 #> 6        90.60465     7.0697674    76.837209       47.62791       1075        3 #>   distr.type unitID   subunitID #> 1          C 600001 60000109444 #> 2          D 600006 60000608774 #> 3          A 600009 60000908780 #> 4          B 600013 60001308257 #> 5          B 600013 60001308553 #> 6          B 600014 60001409077"},{"path":[]},{"path":"/articles/sitepickR-demo.html","id":"define-key-input-values","dir":"Articles","previous_headings":"Study sample design","what":"Define key input values","title":"sitePickR: Getting Started","text":"Since underlying random sampling selectMatch, can set seed replication purposes (optional): Set distance tolerance restricted covariates:","code":"seed = 1122 calip = 0.2 # maximum standard deviations of covariate distance around target population"},{"path":"/articles/sitepickR-demo.html","id":"set-output-sample-sizes","dir":"Articles","previous_headings":"Study sample design > Define key input values","what":"Set output sample sizes","title":"sitePickR: Getting Started","text":"Set size : initial unit sample (Nu) , number matches per unit (K), number sub-units selected potential unit:","code":"Nu <- 100 # district sample size K <- 10 # number of matches per district Ns <- 5 # number of schools per potential district"},{"path":"/articles/sitepickR-demo.html","id":"specify-covariates-of-interest","dir":"Articles","previous_headings":"Study sample design","what":"Specify covariates of interest","title":"sitePickR: Getting Started","text":"Now, specify district level covariates ’ll want match selected districts (units) replacement candidates non-selected sample: Similarly, specify school level covariates ’ll want match districts. running CCD example, covariates just school (sub-unit) level aggregates district level underlying variable. However, sub-unit level variables available dataset: can (optionally) specify covariates exactly match districts. usually categorical covariates, relatively categories –otherwise matching fail, restrictive even empty: Similarly, can optionally specify covariates match districts within given numeric caliper, terms standard deviations. covariates expected numeric variables. case, interested caliper-matching thre covariates: percentage Black, Hispanic, female students district. Notice lower caliper, restrictive matching (result ferwe proportion successful matches per replacement group, even empty ones):","code":"uSampVarsCCD <- c(\"w.pct.frlunch\", \"w.pct.black\", \"w.pct.hisp\", \"w.pct.female\") suSampVarsCCD <- c(\"sch.pct.frlunch\", \"sch.pct.black\", \"sch.pct.hisp\", \"sch.pct.female\") exactMatchVars <-  c(\"distr.type\") calipMatchVars <-  c(\"w.pct.black\", \"w.pct.hisp\", \"w.pct.female\")"},{"path":"/articles/sitepickR-demo.html","id":"get-unit-matches","dir":"Articles","previous_headings":"","what":"Get unit matches","title":"sitePickR: Getting Started","text":"’ll now leverage sampling + MatchIt packages joint functionality, match districts candidate replacements among non-initially selected units using Mahalanobis distance. can also using propensity scores, specified MatchIt’s documentation:","code":"m.out <- selectMatch(df=dfCCD, # dataset                        unitID=\"LEAID\", # column name of district ID                        subunitID=\"NCESSCH\", # column name of school ID                        unitVars=uSampVarsCCD,                        subunitSampVars=suSampVarsCCD,                        exactMatchVars= exactMatchVars,                        calipMatchVars=calipMatchVars,                         nUnitSamp = Nu, # original district sample size                        nRepUnits = K, # number of desired matches per selected district                        nsubUnits = Ns, # number of schools to sample from each candidate district                        calipValue = calip, #                         seedN = seed,                        matchDistance = \"mahalanobis\",                        sizeFlag = TRUE,                        replaceFlag = FALSE, #match without replacement                        writeOut = FALSE, # write out a csv file for: 1) matched units and 2) selected schools                        replacementUnitsFilename = \"replacementsTable.csv\", # filename for {districtA: [districtA replacement list]} table                        subUnitTableFilename = \"schoolsDirectory.csv\" # filename for {districtA: [districtA schools]} table )"},{"path":"/articles/sitepickR-demo.html","id":"assess-balance-and-match-quality","dir":"Articles","previous_headings":"","what":"Assess balance and match quality","title":"sitePickR: Getting Started","text":"default, balance diagnostics sitepickR expressed terms standardized mean difference (SMD) two comparison groups interest: initially selected districts (schools) target population (K distrcit replacement groups).","code":""},{"path":"/articles/sitepickR-demo.html","id":"original-units-vs--target-population","dir":"Articles","previous_headings":"Assess balance and match quality","what":"1. Original units vs. target population","title":"sitePickR: Getting Started","text":"First, want look overall balance initially selected districts (.e. group districts selected initial cube sampling step selectMatch procedure) districts population:  can also take look table actual SMD covariate interest applying summary() function:","code":"unitLovePlot(m.out,              title=\"Standardized Mean Difference: \\n Initially Selected Units vs. Population\") unitBalanceTab = summary(m.out, balMeasure=1) unitBalanceTab  #>       Covariate           SMD #> 1      unitSize  0.0006001704 #> 2 w.pct.frlunch -0.0090978303 #> 3   w.pct.black  0.1846243001 #> 4    w.pct.hisp -0.0393681705 #> 5  w.pct.female -0.0015679560"},{"path":"/articles/sitepickR-demo.html","id":"original-units-vs--replacement-candidates","dir":"Articles","previous_headings":"Assess balance and match quality","what":"2. Original units vs. replacement candidates","title":"sitePickR: Getting Started","text":"assess quality resulting district matches, look balance (terms SMD) group initially selected districts K replacement districts groups, group 1 composed first closest matches ordered terms distance, group 2 corresponds second-best matches, :","code":"matchBalance(m.out,                  title = \"Standardized Mean Difference: Replacement Unit Groups (1...K) vs. Originally Selected Units\") matchBalanceTab = summary(m.out, balMeasure=2) matchBalanceTab #>    unitGrp                                         variable         value #> 1        1                                        unitSize  -0.1501194993 #> 2        2                                        unitSize  -0.2943404613 #> 3        3                                        unitSize  -0.4113216272 #> 4        4                                        unitSize  -0.4520049408 #> 5        5                                        unitSize  -0.4901019169 #> 6        6                                        unitSize  -0.4945457863 #> 7        7                                        unitSize  -0.4960980329 #> 8        8                                        unitSize  -0.4866504082 #> 9        9                                        unitSize  -0.4935704282 #> 10      10                                        unitSize  -0.5014734056 #> 11       1                                   w.pct.frlunch   0.0879801040 #> 12       2                                   w.pct.frlunch  -0.0863747566 #> 13       3                                   w.pct.frlunch  -0.0650728324 #> 14       4                                   w.pct.frlunch  -0.0484471826 #> 15       5                                   w.pct.frlunch  -0.0262339044 #> 16       6                                   w.pct.frlunch  -0.1963502086 #> 17       7                                   w.pct.frlunch  -0.1319417977 #> 18       8                                   w.pct.frlunch  -0.6980170761 #> 19       9                                   w.pct.frlunch  -0.7402887400 #> 20      10                                   w.pct.frlunch  -0.6972089792 #> 21       1                                     w.pct.black   0.1682255909 #> 22       2                                     w.pct.black  -0.0430881721 #> 23       3                                     w.pct.black  -0.1993472929 #> 24       4                                     w.pct.black  -0.2012090115 #> 25       5                                     w.pct.black  -0.5035391793 #> 26       6                                     w.pct.black  -0.5723369054 #> 27       7                                     w.pct.black  -0.5609717087 #> 28       8                                     w.pct.black  -0.6102003529 #> 29       9                                     w.pct.black  -0.5877537932 #> 30      10                                     w.pct.black  -0.5801386754 #> 31       1                                      w.pct.hisp   0.0719424308 #> 32       2                                      w.pct.hisp   0.0245306448 #> 33       3                                      w.pct.hisp   0.0009155396 #> 34       4                                      w.pct.hisp  -0.0054160961 #> 35       5                                      w.pct.hisp  -0.0417689714 #> 36       6                                      w.pct.hisp  -0.3651088809 #> 37       7                                      w.pct.hisp  -0.2984523158 #> 38       8                                      w.pct.hisp  -0.6309042284 #> 39       9                                      w.pct.hisp  -0.7890350101 #> 40      10                                      w.pct.hisp  -0.8190817790 #> 41       1                                    w.pct.female  -0.0783469655 #> 42       2                                    w.pct.female  -0.0039776552 #> 43       3                                    w.pct.female   0.1950476332 #> 44       4                                    w.pct.female   0.1310553552 #> 45       5                                    w.pct.female  -0.0419758693 #> 46       6                                    w.pct.female  -0.2616450819 #> 47       7                                    w.pct.female   0.0213040748 #> 48       8                                    w.pct.female   0.2410818190 #> 49       9                                    w.pct.female   0.2204414257 #> 50      10                                    w.pct.female   0.0453215909 #> 51       1 All Covariates \\n (average of the absolute SMDs)  0.1113229181 #> 52       2 All Covariates \\n (average of the absolute SMDs)  0.0904623380 #> 53       3 All Covariates \\n (average of the absolute SMDs)  0.1743409850 #> 54       4 All Covariates \\n (average of the absolute SMDs)  0.1676265173 #> 55       5 All Covariates \\n (average of the absolute SMDs)  0.2207239683 #> 56       6 All Covariates \\n (average of the absolute SMDs)  0.3779973726 #> 57       7 All Covariates \\n (average of the absolute SMDs)  0.3017535860 #> 58       8 All Covariates \\n (average of the absolute SMDs)  0.5333707769 #> 59       9 All Covariates \\n (average of the absolute SMDs)  0.5662178794 #> 60      10 All Covariates \\n (average of the absolute SMDs)  0.5286448860"},{"path":"/articles/sitepickR-demo.html","id":"successfully-computed-unit-matches","dir":"Articles","previous_headings":"Assess balance and match quality","what":"3. Successfully computed unit matches","title":"sitePickR: Getting Started","text":"also want look success rate matching process original districts replacement candidate groups non-select pool: K replacements groups (ordered least similar, terms specified covariates), look percentage replacements. percentage expected inversely related restrictions imposed exact matching, caliper value, inherent structure size data, well K, number matches (.e. replacement candidates) want original districts:  Similarly, can, use summary()obtain balance directly table:","code":"matchCount(m.out,              title=\"Percentage of Successful Matches per Unit Group\") matchCountTab = summary(m.out, balMeasure=3) matchCountTab #>                     Perc_Matches UnitGroup #> Unit_replacement_1           100         1 #> Unit_replacement_2           100         2 #> Unit_replacement_3           100         3 #> Unit_replacement_4           100         4 #> Unit_replacement_5           100         5 #> Unit_replacement_6           100         6 #> Unit_replacement_7            50         7 #> Unit_replacement_8            34         8 #> Unit_replacement_9            21         9 #> Unit_replacement_10           17        10"},{"path":"/articles/sitepickR-demo.html","id":"sub-units-from-original-vs--candidate-units","dir":"Articles","previous_headings":"Assess balance and match quality","what":"4. Sub-units from original vs. candidate units","title":"sitePickR: Getting Started","text":"Ultimately, procedure wants yield districts also schools similar target population, terms district level covariates school level ones. sitepickR’s subUnitBalance() function lets us assess matching quality precisely terms:  Similary, use summary() function obtain balance directly table:","code":"subUnitBalance(m.out,                   title=\"Standardized Mean Difference: \\n Sub-units from Original + Replacement Unit Groups vs. Population\") subUnitBalanceTab = summary(m.out, balMeasure=4) subUnitBalanceTab #>     unitGrp                                         variable         value #> 1         0                                        unitSize  -0.1172364047 #> 2         1                                        unitSize  -0.2625787631 #> 3         2                                        unitSize  -0.3494034453 #> 4         3                                        unitSize  -0.4045265839 #> 5         4                                        unitSize  -0.4339780517 #> 6         5                                        unitSize  -0.4622501174 #> 7         6                                        unitSize  -0.4642802427 #> 8         7                                        unitSize  -0.4584538914 #> 9         8                                        unitSize  -0.4614375116 #> 10        9                                        unitSize  -0.4655203603 #> 11       10                                        unitSize  -0.4711909835 #> 12        0                                   w.pct.frlunch   0.0324414058 #> 13        1                                   w.pct.frlunch   0.0397079052 #> 14        2                                   w.pct.frlunch  -0.2024191004 #> 15        3                                   w.pct.frlunch  -0.1820785137 #> 16        4                                   w.pct.frlunch  -0.2449325514 #> 17        5                                   w.pct.frlunch  -0.1198340750 #> 18        6                                   w.pct.frlunch  -0.1611676620 #> 19        7                                   w.pct.frlunch  -0.1279968572 #> 20        8                                   w.pct.frlunch  -0.7053528070 #> 21        9                                   w.pct.frlunch  -0.5327794614 #> 22       10                                   w.pct.frlunch  -0.4170790510 #> 23        0                                     w.pct.black   0.0125291104 #> 24        1                                     w.pct.black   0.1473213011 #> 25        2                                     w.pct.black  -0.1144066925 #> 26        3                                     w.pct.black  -0.0267610839 #> 27        4                                     w.pct.black  -0.1677871207 #> 28        5                                     w.pct.black  -0.6155103084 #> 29        6                                     w.pct.black  -0.7090204889 #> 30        7                                     w.pct.black  -0.6947913673 #> 31        8                                     w.pct.black  -0.7421740856 #> 32        9                                     w.pct.black  -0.7020242255 #> 33       10                                     w.pct.black  -0.7006807436 #> 34        0                                      w.pct.hisp   0.0797792232 #> 35        1                                      w.pct.hisp   0.1419596265 #> 36        2                                      w.pct.hisp  -0.0254515446 #> 37        3                                      w.pct.hisp  -0.1515926535 #> 38        4                                      w.pct.hisp  -0.1731308037 #> 39        5                                      w.pct.hisp  -0.0432153449 #> 40        6                                      w.pct.hisp  -0.3039891862 #> 41        7                                      w.pct.hisp  -0.3885415513 #> 42        8                                      w.pct.hisp  -0.6140017073 #> 43        9                                      w.pct.hisp  -0.7953240044 #> 44       10                                      w.pct.hisp  -0.8396110151 #> 45        0                                    w.pct.female   0.0505712246 #> 46        1                                    w.pct.female   0.0133276241 #> 47        2                                    w.pct.female   0.0520636555 #> 48        3                                    w.pct.female   0.1926969263 #> 49        4                                    w.pct.female   0.1278740414 #> 50        5                                    w.pct.female  -0.0038164179 #> 51        6                                    w.pct.female  -0.2017726240 #> 52        7                                    w.pct.female  -1.0833563309 #> 53        8                                    w.pct.female   0.4219308950 #> 54        9                                    w.pct.female   0.3519037821 #> 55       10                                    w.pct.female   0.0595760053 #> 56        0                                 sch.pct.frlunch   0.0205378675 #> 57        1                                 sch.pct.frlunch   0.0334419040 #> 58        2                                 sch.pct.frlunch  -0.1761498865 #> 59        3                                 sch.pct.frlunch  -0.1594917571 #> 60        4                                 sch.pct.frlunch  -0.2145487801 #> 61        5                                 sch.pct.frlunch  -0.1049687126 #> 62        6                                 sch.pct.frlunch  -0.1411748870 #> 63        7                                 sch.pct.frlunch  -0.1121189055 #> 64        8                                 sch.pct.frlunch  -0.6178541131 #> 65        9                                 sch.pct.frlunch  -0.4666884123 #> 66       10                                 sch.pct.frlunch  -0.3653405850 #> 67        0                                   sch.pct.black  -0.0133518322 #> 68        1                                   sch.pct.black   0.1089600917 #> 69        2                                   sch.pct.black  -0.0798536997 #> 70        3                                   sch.pct.black  -0.0204378307 #> 71        4                                   sch.pct.black  -0.1281414748 #> 72        5                                   sch.pct.black  -0.4700742128 #> 73        6                                   sch.pct.black  -0.5414893035 #> 74        7                                   sch.pct.black  -0.5306223154 #> 75        8                                   sch.pct.black  -0.5668091895 #> 76        9                                   sch.pct.black  -0.5361461549 #> 77       10                                   sch.pct.black  -0.5351201182 #> 78        0                                    sch.pct.hisp   0.0759932378 #> 79        1                                    sch.pct.hisp   0.1339399721 #> 80        2                                    sch.pct.hisp  -0.0260682921 #> 81        3                                    sch.pct.hisp  -0.1356821502 #> 82        4                                    sch.pct.hisp  -0.1549597501 #> 83        5                                    sch.pct.hisp  -0.0386796509 #> 84        6                                    sch.pct.hisp  -0.2720838080 #> 85        7                                    sch.pct.hisp  -0.3477619259 #> 86        8                                    sch.pct.hisp  -0.5495587679 #> 87        9                                    sch.pct.hisp  -0.7118502681 #> 88       10                                    sch.pct.hisp  -0.7514891074 #> 89        0                                  sch.pct.female   0.0154784717 #> 90        1                                  sch.pct.female   0.0008496193 #> 91        2                                  sch.pct.female   0.0327176186 #> 92        3                                  sch.pct.female   0.1304002661 #> 93        4                                  sch.pct.female   0.0865338609 #> 94        5                                  sch.pct.female  -0.0025826147 #> 95        6                                  sch.pct.female  -0.1365418969 #> 96        7                                  sch.pct.female  -0.7331199127 #> 97        8                                  sch.pct.female   0.2855255765 #> 98        9                                  sch.pct.female   0.2381374093 #> 99       10                                  sch.pct.female   0.0403157803 #> 100       0 All Covariates \\n (average of the absolute SMDs)  0.0464354198 #> 101       1 All Covariates \\n (average of the absolute SMDs)  0.0980096452 #> 102       2 All Covariates \\n (average of the absolute SMDs)  0.1176148817 #> 103       3 All Covariates \\n (average of the absolute SMDs)  0.1559630850 #> 104       4 All Covariates \\n (average of the absolute SMDs)  0.1924318261 #> 105       5 All Covariates \\n (average of the absolute SMDs)  0.2067701616 #> 106       6 All Covariates \\n (average of the absolute SMDs)  0.3257244555 #> 107       7 All Covariates \\n (average of the absolute SMDs)  0.4974181175 #> 108       8 All Covariates \\n (average of the absolute SMDs)  0.5516271837 #> 109       9 All Covariates \\n (average of the absolute SMDs)  0.5333748976 #> 110      10 All Covariates \\n (average of the absolute SMDs)  0.4644892655"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Elena Badillo-Goicoechea. Maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Stuart EA, Olsen R, Badillo-Goicoechea E (2022). sitepickR: Two-level Sample Selection Optimal Site Replacement. R package version 0.1.0.","code":"@Manual{,   title = {sitepickR: Two-level Sample Selection with Optimal Site Replacement},   author = {Elizabeth A. Stuart and Robert Olsen and Elena Badillo-Goicoechea},   year = {2022},   note = {R package version 0.1.0}, }"},{"path":[]},{"path":"/index.html","id":"sitepickr-a-generalizability-r-package","dir":"","previous_headings":"","what":"sitepickR: A Generalizability R package","title":"Two-level Sample Selection with Optimal Site Replacement","text":"Robert Olsen, Elena Badillo-Goicoechea & Elizabeth . Stuart (2022)","code":""},{"path":"/index.html","id":"introduction","dir":"","previous_headings":"","what":"Introduction","title":"Two-level Sample Selection with Optimal Site Replacement","text":"sitepickR designed select representative sample sites prospective impact evaluation, randomized controlled trial (RCT). Like generalizeR, package designed selecting schools can used select type site defined geography administrative responsibility (e.g., county, job training center, health clinic). Unlike generalizeR, sitepicker designed select sites two stages—first “units” contain multiple sites located nearby /administration “subunits” containing individual sites. Two-stage sampling may necessary cost study depend number units (e.g., school districts), one-stage sample subunits (e.g., schools) likely contain units study can afford. main function package, selectMatch() lets user carry two-level sample selection possibility initially selected participant wanting participate anticipated. procedure aims reduce bias (/loss generalizability population) introduce. selecting units subunits, sitepickR uses cube method (e.g., Deville & Tillé, 2004; Tillé 2011). cube method probability sampling method designed satisfy criteria balance sample population. Recent research shown method performs well simulations studies educational programs (Fay & Olsen, review). implement cube method, sitepickerR uses sampling R package. Users option select units equal probabilities probabilities proportional “size” measured terms number subunits nested within units. addition, sitepickR uses statistical matching select possible replacement units. education RCTs, share selected districts agrees participate tends low. address challenge, sitepickR selects ranks 10 replacement districts districts selected using cube method. Replacement districts selected using statistical matching based propensity score methods. implement statistical matching, sitepickR uses MatchIt R package.","code":""},{"path":"/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Two-level Sample Selection with Optimal Site Replacement","text":"Install seamlessly using devtools package: sitepickR’s core sampling + matching procedure, implemented selectMatch() function, consists four main steps: Study sample design: identify: 1) target population nested structure (e.g. [school district:school]); 2) observable covariates interest unit level; 3) observable covariates interest sub-unit level. Randomly select initial sample units target population. Obtain list ‘best’ matches (e.g. replacement candidates) initially selected unit, terms covariates interest. Balance initially selected (‘original’) units target population. Balance original units group matches (1 K, closest ). Balance sub-units associated unit replacement group original sub-units population, terms available covariates interest, unit sub-unit level. ## References Deville, J. C., & Tillé, Y. (2004). Efficient balanced sampling: cube method. Biometrika, 91, 893-912. Tillé, Y. (2011). Ten years balanced sampling cube method: appraisal. Survey Methodology, 37, 215-226.","code":"if(!require(devtools)){     install.packages(\"devtools\")     }  devtools::install_github(\"ElenaBadilloG/sitepickR\")"},{"path":"/index.html","id":"acknowledgements","dir":"","previous_headings":"","what":"Acknowledgements","title":"Two-level Sample Selection with Optimal Site Replacement","text":"Noah Greifer, maintainer MatchIt package valuable input.","code":""},{"path":"/reference/makeDF.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare nested dataset — makeDF","title":"Prepare nested dataset — makeDF","text":"Prepare nested dataset","code":""},{"path":"/reference/makeDF.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare nested dataset — makeDF","text":"","code":"makeDF(df, unitID, subunitID)"},{"path":"/reference/makeDF.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare nested dataset — makeDF","text":"df dataframe unitID character; unit column name subunitID character; unit column name","code":""},{"path":"/reference/makeDF.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare nested dataset — makeDF","text":"processed df","code":""},{"path":"/reference/matchBalance.html","id":null,"dir":"Reference","previous_headings":"","what":"Figure: SMD between sampled units vs. all units in population, for each covariate of interest — matchBalance","title":"Figure: SMD between sampled units vs. all units in population, for each covariate of interest — matchBalance","text":"Figure: SMD sampled units vs. units population, covariate interest","code":""},{"path":"/reference/matchBalance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Figure: SMD between sampled units vs. all units in population, for each covariate of interest — matchBalance","text":"","code":"matchBalance(   m.out,   title =     \"Standardized Mean Difference: Replacement Unit Groups (1...K) vs. Originally Selected Units\" )"},{"path":"/reference/matchBalance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Figure: SMD between sampled units vs. all units in population, for each covariate of interest — matchBalance","text":"m.list; selectMatch() output","code":""},{"path":"/reference/matchBalance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Figure: SMD between sampled units vs. all units in population, for each covariate of interest — matchBalance","text":"ggplot object","code":""},{"path":"/reference/matchCount.html","id":null,"dir":"Reference","previous_headings":"","what":"Percentage of successful matches in each replacement unit group, 1...K — matchCount","title":"Percentage of successful matches in each replacement unit group, 1...K — matchCount","text":"Percentage successful matches replacement unit group, 1...K","code":""},{"path":"/reference/matchCount.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Percentage of successful matches in each replacement unit group, 1...K — matchCount","text":"","code":"matchCount(m.out, title = \"Percentage of Successful Matches per Unit Group\")"},{"path":"/reference/matchCount.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Percentage of successful matches in each replacement unit group, 1...K — matchCount","text":"m.list; selectMatch() output","code":""},{"path":"/reference/matchCount.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Percentage of successful matches in each replacement unit group, 1...K — matchCount","text":"ggplot object","code":""},{"path":"/reference/rawCCD.html","id":null,"dir":"Reference","previous_headings":"","what":"Common Core of Data (CCD) data for California schools (2017-18). — rawCCD","title":"Common Core of Data (CCD) data for California schools (2017-18). — rawCCD","text":"pre-processed dataset containing key variables administrative data compiled CCD, aggregated  district school level public schools California 2017 2018 school years.","code":""},{"path":"/reference/rawCCD.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Common Core of Data (CCD) data for California schools (2017-18). — rawCCD","text":"","code":"data(rawCCD)"},{"path":"/reference/rawCCD.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Common Core of Data (CCD) data for California schools (2017-18). — rawCCD","text":"data frame 1890 rows 13 variables. LEAID school district unique identifier NCESSCH school unique identifier w.pct.frlunch percentage students school district free/reduced price lunch program; weighted school size. w.pct.black percentage students school district Black; weighted school size. w.pct.hisp percentage students school district Hispanic; weighted school size. w.pct.female percentage students school district female; weighted school size. sch.pct.frlunch percentage students school free/reduced price lunch program. sch.pct.black percentage students school Black. sch.pct.hisp percentage students school Hispanic. sch.pct.female percentage students school female. distr.type categorical  district type (artificially created illustration purposes; (values=\"\", \"B\", \"C\", \"D\")).","code":""},{"path":"/reference/rawCCD.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Common Core of Data (CCD) data for California schools (2017-18). — rawCCD","text":"https://nces.ed.gov/ccd//","code":""},{"path":"/reference/selectMatch.html","id":null,"dir":"Reference","previous_headings":"","what":"Two-level sample selection — selectMatch","title":"Two-level sample selection — selectMatch","text":"Carries two-level sample selection possibility initially selected site wanting participate anticipated, site optimally replaced.  procedure aims reduce bias (/loss generalizability) respect target population.","code":""},{"path":"/reference/selectMatch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Two-level sample selection — selectMatch","text":"","code":"selectMatch(   df,   unitID,   subunitID,   subunitSampVars,   unitVars,   nUnitSamp,   nRepUnits,   nsubUnits,   exactMatchVars = NULL,   calipMatchVars = NULL,   calipValue = 0.2,   seedN = NA,   matchDistance = \"mahalanobis\",   sizeFlag = TRUE,   replaceFlag = TRUE,   writeOut = TRUE,   replacementUnitsFilename = \"replacementUnits.csv\",   subUnitTableFilename = \"subUnitTable.csv\" )"},{"path":"/reference/selectMatch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Two-level sample selection — selectMatch","text":"df dataframe; sub-unit level dataframe sub-unit unit level variables unitID character; name unit ID column subunitID character; name sub-unit ID column subunitSampVars vector;  column names unit level variables  sample units unitVars vector; column names unit level variables  match units nUnitSamp numeric; number units initially randomly selected nRepUnits numeric; number replacement units find selected unit nsubUnits numeric; number sub-units randomly selected unit exactMatchVars vector; column names categorical variables units must matched exactly. Must present 'unitVars'; default = NULL calipMatchVars vector; column names continuous variables units must matched within specified caliper. Must present 'unitVars'; default = NULL calipValue numeric; number standard deviations used caliper matching units calipMatchVars seedN numeric; seed number used sampling. NA, calls set.seed(); default = NA matchDistance character; MatchIt::matchit distance parameter obtain optimal matches (nearest neigboors); default = \"mahalanois\" sizeFlag logical; TRUE, sampling made proportional unit size; default = TRUE replaceFlag logical; TRUE, get matches replacement; default = TRUE writeOut logical; TRUE, writes .csv file output table; default = TRUE replacementUnitsFilename character; csv filename saving unit:replacement directory writeOut == TRUE; default = \"replacementUnits.csv\" subUnitTableFilename character; csv filename saving unit:replacement directory writeOut == TRUE; default = \"subUnitTable.csv\"","code":""},{"path":"/reference/selectMatch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Two-level sample selection — selectMatch","text":"list : 1) table form: selected unit : (unit replacements), 2) table form: potential unit :(unit sub-units), 3) balance diagnostics.","code":""},{"path":"/reference/sitepickR-package.html","id":null,"dir":"Reference","previous_headings":"","what":"sitepickR: Two-level Sample Selection with Optimal Site Replacement — sitepickR-package","title":"sitepickR: Two-level Sample Selection with Optimal Site Replacement — sitepickR-package","text":"Carries two-level sample selection possibility initially selected site wanting participate anticipated, site optimally replaced. procedure aims reduce bias (/loss generalizability) respect target population.","code":""},{"path":"/reference/subUnitBalance.html","id":null,"dir":"Reference","previous_headings":"","what":"Sub-unit balance between initially selected units and all units in population, for each covariate of interest — subUnitBalance","title":"Sub-unit balance between initially selected units and all units in population, for each covariate of interest — subUnitBalance","text":"Sub-unit balance initially selected units units population, covariate interest","code":""},{"path":"/reference/subUnitBalance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sub-unit balance between initially selected units and all units in population, for each covariate of interest — subUnitBalance","text":"","code":"subUnitBalance(   m.out,   title = \"Subunits from Original and Replacement Unit Groups vs. Population (SMD)\" )"},{"path":"/reference/subUnitBalance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sub-unit balance between initially selected units and all units in population, for each covariate of interest — subUnitBalance","text":"m.list; selectMatch() output","code":""},{"path":"/reference/subUnitBalance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sub-unit balance between initially selected units and all units in population, for each covariate of interest — subUnitBalance","text":"ggplot object","code":""},{"path":"/reference/summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary tables, with unit/matches/sub-unit balance between initially selected units and all units in population, for each covariate of interest — summary","title":"Summary tables, with unit/matches/sub-unit balance between initially selected units and all units in population, for each covariate of interest — summary","text":"Summary tables, unit/matches/sub-unit balance initially selected units units population, covariate interest","code":""},{"path":"/reference/summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary tables, with unit/matches/sub-unit balance between initially selected units and all units in population, for each covariate of interest — summary","text":"","code":"summary(m.out, balMeasure)"},{"path":"/reference/summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary tables, with unit/matches/sub-unit balance between initially selected units and all units in population, for each covariate of interest — summary","text":"m.list; selectMatch() output balMeasure numeric; balance Diagnostic (1=original unit balance, 2=match balance, 3=match success percent, 4=sub-unit balance)","code":""},{"path":"/reference/summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary tables, with unit/matches/sub-unit balance between initially selected units and all units in population, for each covariate of interest — summary","text":"ggplot object","code":""},{"path":"/reference/unitLovePlot.html","id":null,"dir":"Reference","previous_headings":"","what":"SMD between sampled units and all units in population — unitLovePlot","title":"SMD between sampled units and all units in population — unitLovePlot","text":"SMD sampled units units population","code":""},{"path":"/reference/unitLovePlot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"SMD between sampled units and all units in population — unitLovePlot","text":"","code":"unitLovePlot(   m.out,   title = \"Standardized Mean Difference: \\n Initially Selected Units vs. Population\" )"},{"path":"/reference/unitLovePlot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SMD between sampled units and all units in population — unitLovePlot","text":"m.list; selectMatch() output","code":""},{"path":"/reference/unitLovePlot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"SMD between sampled units and all units in population — unitLovePlot","text":"ggplot object","code":""}]
